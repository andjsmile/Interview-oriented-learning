### 多线程程序的运行特点

1.当前线程可能随时都会被切换出去，或者说被抢占了

2.多线程程序中事件的发生顺序不在有全局统一的先后关系了


传统的fork()并发模型不适合多线程程序

1.基本的线程原语句的选用

- 线程的创建和等待结束(join) Thread
- mutex的创建，销毁，加锁，解锁      MutexLock
- 条件的变量的创建，销毁，等待，通知，广播     Condition


3.多线程与IO

每个文件描述符只有一个线程操作，从而解决消息收发的顺序性问题

对同一个epoll fd的操作(添加，删除，修改，等待)放到同一个线程中执行

linux 文件描述符file descriptor

文件描述符是一个小整数

0-标准输入
1-标准输出
2-标准错误

POSIX标准要求每次新打开文件(含socket)的时候，必须使用当前最小可用的文件描述符号码

在多线程编程中因为fd的分配规则，会造成串话

RAII 把资源管理和对象生命期管理统一起来


**总结**

1.线程的创建和销毁是有代价的，一个程序最好在一开始就创建所需的线程,并一直反复使用
  不要在运行期间反复创建，销毁线程

2.每个线程都要有明确的职责
  IO线程   EventLoop::loop()  处理io事件
  计算线程  ThreadPool         负责计算


